__author__ = 'shreyas'

'''
Types of lines in .asm
1) .text
2) .rdata
3) .data
4) .idata
'''


def readfile(trainlabels, traindatafolder):
    f1 = open(trainlabels)
    f1.readline() # skip 1st line
    typeoflines = ['.text','.rdata','.data', '.idata']
    writefile = open("feature1.csv", "w")
    writefile.write("ID")
    for item in typeoflines:
        writefile.write(","+item)
    for line1 in f1:
        name = line1.split(',')[0]
        count_lines = {}
        for item in typeoflines:
            count_lines[item] = 0
        f2 = open(traindatafolder+"/"+name+".asm", encoding = "ISO-8859-1")
        for line2 in f2:
            for val in typeoflines:
                if line2.split(':')[0].__contains__(val):
                    count_lines[val] = count_lines[val] + 1
                    break
        #print(name+str(count_lines))
        writefile.write("\n")
        writefile.write(name)
        for item in typeoflines:
            writefile.write(","+str(count_lines[item]))




